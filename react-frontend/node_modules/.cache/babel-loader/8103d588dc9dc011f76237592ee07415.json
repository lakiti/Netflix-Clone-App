{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/spring_boy/NetflixCloneProject/react-view/src/components/DetailContent.js\";\nimport React, { Component } from \"react\";\nimport { Modal } from \"reactstrap\";\nimport TMDBMovieApiService from \"../apis/TMDBMovieApiService\";\nimport FavoriteMovieApiService from \"../apis/FavoriteMovieApiService\";\nimport CommentApiService from \"../apis/CommentApiService\";\nimport * as Icon from \"react-bootstrap-icons\";\nimport Comments from \"./Comments\";\n\nclass DetailContentCompoent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleMovieSave = async () => {\n      var temp = {\n        movie_id: this.state.id,\n        movie_original_title: this.props.movie.original_title,\n        poster_path: this.props.movie.poster_path,\n        user_id: window.sessionStorage.getItem(\"user\"),\n        user_email: JSON.parse(window.sessionStorage.getItem(\"user\")).userEmail\n      };\n      console.log(temp); //유저세션값이 있을때(로그인)만 저장가능\n\n      if (JSON.parse(window.sessionStorage.getItem(\"user\")).userEmail != null) {\n        await FavoriteMovieApiService.addMovie(temp).then(res => {\n          console.log(res.data); //해당 영화가 내가 찜한목록에 있는지 없는지 여부 판단.\n\n          if (res.data === 'success') {\n            console.info('save success', this.props.databaseid);\n            alert(\"I wished\");\n            this.setState({\n              modal: false\n            });\n          } else {\n            alert(\"이미 찜목록에 있습니다.\");\n            this.setState({\n              modal: false\n            });\n          }\n        }).catch(err => {\n          console.error('ApiService.addMovies 에러', err);\n          alert('Wish list save error\\nPlease contact the administrator');\n        }); //로그인이 하지않으면 찜버튼눌렀을때 로그인화면으로 이동시킴\n      } else {\n        alert('It is available after login.');\n        window.location.href = \"http://localhost:3000/login\";\n      }\n    };\n\n    this.handleMovieDelete = async () => {\n      await FavoriteMovieApiService.removeMovie2(this.state.id).then(res => {\n        console.info('삭제성공', res.state);\n        console.log(res.data);\n\n        if (res.data === 'success') {\n          alert(\"삭제했습니다.\"); // 내가찜한컨텐츠 페이지에서 삭제할 때\n\n          if (document.location.href === \"http://localhost:3000/myContent\") {\n            this.props.loadFavoriteMovie();\n            this.setState({\n              modal: false\n            });\n          } else {\n            //다른 화면에서 삭제할 때\n            this.setState({\n              modal: false\n            });\n          }\n        } else {\n          // 찜하지 않은 목록에서 삭제버튼을 누를때\n          alert('찜 목록에 없습니다.');\n          return;\n        }\n      }).catch(err => {\n        console.error('ApiService.removeMovie 에러', err);\n        alert('찜 목록 삭제 오류\\n관리자 문의 바람');\n      });\n    };\n\n    this.getAllInfo = () => {\n      this.getMovieDetails();\n      this.getMoviesYoutubeKey();\n      this.getMovieCredits();\n      this.getCommentList();\n    };\n\n    this.getMovieDetails = async () => {\n      let res = await TMDBMovieApiService.getMovieDetails(this.state.id);\n      let genres = res.data.genres.map(item => {\n        return item.name;\n      });\n      this.setState({\n        details: res.data,\n        genres: genres\n      }, () => {\n        console.log(\"눌렀을때 디테일값!\", this.state.details);\n        console.log(\"this.state.poster_image : \", this.state.poster_image); // console.log('눌렀을때 장르값!', this.state.genres);\n      });\n    };\n\n    this.getMoviesYoutubeKey = async () => {\n      let res = await TMDBMovieApiService.getYoutubeKey(this.state.id); //유튜브 영상이 있는경우 키값을 저장\n\n      if (res.data.results[0] !== undefined) {\n        console.log(\"youtubeKey데이터:\", res.data.results[0].key); //대표 유튜브영상 1개만 들고와서 저장함\n\n        this.setState({\n          key: \"https://youtube.com/embed/\" + res.data.results[0].key + \"?autoplay=1&controls=0&rel=0&loop=1\"\n        }, () => {// console.log('눌렀을때 youtubeKey값!', this.state.key);\n        }); //없는경우 key를 false로 저장함\n      } else {\n        this.setState({\n          key: false\n        });\n      }\n    };\n\n    this.getMovieCredits = async () => {\n      let res = await TMDBMovieApiService.getCredits(this.state.id);\n      let cast = res.data.cast.slice(0, 6).map(item => {\n        return item.name;\n      }); // console.log('참여 스테프정보:', res.data);\n      // console.log('참여 배우:', res.data.cast);\n\n      this.setState({\n        cast: cast\n      }, () => {// console.log('눌렀을때 cast값!', this.state.cast);\n      });\n    };\n\n    this.getCommentList = async () => {\n      let res = await CommentApiService.getCommentList(this.state.id);\n      let commentList = res.data;\n      this.setState({\n        comments: commentList\n      }, () => {\n        console.log(\"댓글정보!!!!\");\n        console.log(this.state.comments);\n      });\n    };\n\n    this.seperactor = Array => {\n      var seperactor = \",\";\n      var tempString = \"\";\n\n      for (var i = 0; i < Array.length; i++) {\n        if (i < Array.length - 1) {\n          tempString += Array[i] + seperactor;\n        } else if (i === Array.length - 1) {\n          tempString += Array[i];\n        }\n      }\n\n      return tempString;\n    };\n\n    this.toggle = () => {\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n\n    this.handleText = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.writeMovieComment = () => {\n      let user_id = sessionStorage.getItem(\"user\"); //로그인되어있는지 session값 체크\n\n      if (user_id == null) {\n        alert(\"로그인이 필요합니다\"); //로그인 페이지로 보냄\n\n        window.location.href = \"http://localhost:3000/login\";\n      }\n\n      let content = this.state.content; //객체생성\n\n      let comment = {\n        movie_id: this.state.id,\n        user_id: user_id,\n        content: content\n      }; //api호출\n\n      CommentApiService.writeMovieComment(comment).then(res => {\n        console.log(res.data);\n        let result = res.data;\n\n        if (result === 1) {\n          alert(\"댓글작성완료\");\n          this.getCommentList(); //작성한 댓글 초기화\n\n          this.setState({\n            content: \"\"\n          });\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.deleteComment = (id, user_id) => {\n      // console.log(typeof this.props.user_id); //넘버\n      // console.log(typeof sessionStorage.getItem(\"user\")); //스트링\n      console.log(id); //해당 comment의 아이디값!\n\n      console.log(user_id); //로그인 유저와 댓글 작성자가 동일인의 경우 삭제가능\n\n      if (sessionStorage.getItem(\"user\") === user_id.toString()) {\n        CommentApiService.deleteComment(id).then(res => {\n          console.log(res.data); //삭제성공\n\n          if (res.status === 200) {\n            alert(\"댓글이 삭제되었습니다\"); //삭제 후 댓글리스트 다시 불러오기\n\n            this.getCommentList();\n          }\n        }).catch(err => console.log(err));\n      }\n    };\n\n    this.state = {\n      user_id: this.props.user_id,\n      id: this.props.id,\n      movie: this.props.movie,\n      modal: false,\n      //기본 모달값 false\n      details: {},\n      genres: [],\n      //전달받은 포스터 이미지를 그대로 보여줌\n      poster_image: \"http://image.tmdb.org/t/p/w500\" + this.props.movie.poster_path,\n      content: \"\" //comment 내용\n\n    };\n  } //찜한 목록 추가\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn bg-transparent\",\n        onClick: this.toggle,\n        children: this.state.poster_image === \"http://image.tmdb.org/t/p/w500null\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"\",\n          src: \"https://i.ytimg.com/vi/GV3HUDMQ-F8/maxresdefault.jpg\",\n          height: \"270\",\n          width: \"180\",\n          style: {\n            margin: \"5px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: this.state.poster_image,\n          width: \"180px\",\n          alt: \"new\",\n          style: {\n            borderRadius: 5\n          },\n          onClick: this.getAllInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        size: \"lg\",\n        className: \"my-modal\",\n        style: {\n          maxWidth: \"900px\",\n          width: \"80%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: this.toggle,\n              style: {\n                paddingRight: \"10px\",\n                margin: \"5px\",\n                textDecoration: \"none\",\n                color: \"#777777\",\n                fontWeight: \"bold\",\n                fontSize: \"x-large\",\n                flex: \"1\",\n                textAlign: \"right\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Icon.XCircleFill, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vedio\",\n                children: [this.state.key ? /*#__PURE__*/_jsxDEV(\"iframe\", {\n                  title: \"Youtube Video Player\",\n                  className: \"video\",\n                  allowFullScreen: true,\n                  frameBorder: \"0\",\n                  style: {\n                    width: \"100%\",\n                    height: \"50vh\",\n                    margin: 0,\n                    padding: 0\n                  },\n                  allow: \"autoplay\",\n                  src: this.state.key\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 21\n                }, this) : \"Youtube영상이 없습니다\", /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    style: {\n                      color: \"white\"\n                    },\n                    children: this.state.details && this.state.details.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      flexDirection: \"row\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"btn btn-light btn-lg\",\n                      type: \"button\",\n                      value: \"\\u25B6 \\uC7AC\\uC0DD\",\n                      style: {\n                        margin: 5\n                      },\n                      onClick: () => window.open(`${this.state.key}`, \"_blank\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 321,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"btn btn-light btn-lg\",\n                      type: \"button\",\n                      value: \"\\u2764\",\n                      style: {\n                        margin: 5,\n                        borderRadius: 20\n                      },\n                      onClick: () => this.handleMovieSave()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 330,\n                      columnNumber: 23\n                    }, this), sessionStorage.getItem(\"user\") != null ? /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"btn btn-light btn-lg\",\n                      type: \"button\",\n                      value: \"\\u274C \",\n                      style: {\n                        margin: 5,\n                        borderRadius: 20\n                      },\n                      onClick: () => this.handleMovieDelete(this.state.id)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 338,\n                      columnNumber: 25\n                    }, this) : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            style: {\n              paddingLeft: \"24px\",\n              marginTop: 15\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-8\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"content1\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"contentFont\",\n                  children: [this.state.details.release_date && this.state.details.release_date, \" \", this.state.details.runtime && this.state.details.runtime, \"\\uBD84\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"contentFont\",\n                  style: {\n                    marginTop: 15\n                  },\n                  children: this.state.details.overview ? this.state.details.overview : \"줄거리 요약이 없습니다\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"content2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flexDirection: \"row\",\n                    marginBottom: 10\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textDecoration: \"none\",\n                      color: \"#777777\"\n                    },\n                    children: \"\\uCD9C\\uC5F0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"detailFont\",\n                    children: this.state.cast && this.seperactor(this.state.cast)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flexDirection: \"row\",\n                    marginBottom: 10\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textDecoration: \"none\",\n                      color: \"#777777\"\n                    },\n                    children: \"\\uC7A5\\uB974\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"detailFont\",\n                    children: this.state.genres && this.seperactor(this.state.genres)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            style: {\n              paddingLeft: \"24px\",\n              marginTop: 20\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"form-inline\",\n                style: {\n                  width: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  placeholder: \"\\uB313\\uAE00\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                  className: \"form-control\",\n                  rows: \"2\",\n                  cols: \"100\",\n                  name: \"content\",\n                  value: this.state.content,\n                  onChange: e => this.handleText(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-danger btn-lg\",\n                  style: {\n                    margin: 10\n                  },\n                  onClick: () => this.writeMovieComment(),\n                  children: \"\\uB313\\uAE00\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"comment\",\n                children: this.state.comments ? this.state.comments.map(item => {\n                  return /*#__PURE__*/_jsxDEV(Comments, {\n                    id: item.id,\n                    movie_id: item.movie_id,\n                    user_id: item.user_id,\n                    content: item.content,\n                    deleteComment: this.deleteComment\n                  }, item.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 27\n                  }, this);\n                }) : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default DetailContentCompoent;","map":{"version":3,"sources":["/home/spring_boy/NetflixCloneProject/react-view/src/components/DetailContent.js"],"names":["React","Component","Modal","TMDBMovieApiService","FavoriteMovieApiService","CommentApiService","Icon","Comments","DetailContentCompoent","constructor","props","handleMovieSave","temp","movie_id","state","id","movie_original_title","movie","original_title","poster_path","user_id","window","sessionStorage","getItem","user_email","JSON","parse","userEmail","console","log","addMovie","then","res","data","info","databaseid","alert","setState","modal","catch","err","error","location","href","handleMovieDelete","removeMovie2","document","loadFavoriteMovie","getAllInfo","getMovieDetails","getMoviesYoutubeKey","getMovieCredits","getCommentList","genres","map","item","name","details","poster_image","getYoutubeKey","results","undefined","key","getCredits","cast","slice","commentList","comments","seperactor","Array","tempString","i","length","toggle","handleText","e","target","value","writeMovieComment","content","comment","result","deleteComment","toString","status","render","margin","borderRadius","maxWidth","width","paddingRight","textDecoration","color","fontWeight","fontSize","flex","textAlign","height","padding","title","flexDirection","open","paddingLeft","marginTop","release_date","runtime","overview","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal } from \"reactstrap\";\nimport TMDBMovieApiService from \"../apis/TMDBMovieApiService\";\nimport FavoriteMovieApiService from \"../apis/FavoriteMovieApiService\";\nimport CommentApiService from \"../apis/CommentApiService\";\nimport * as Icon from \"react-bootstrap-icons\";\nimport Comments from \"./Comments\";\n\nclass DetailContentCompoent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_id: this.props.user_id,\n      id: this.props.id,\n      movie: this.props.movie,\n      modal: false, //기본 모달값 false\n      details: {},\n      genres: [],\n      //전달받은 포스터 이미지를 그대로 보여줌\n      poster_image:\n        \"http://image.tmdb.org/t/p/w500\" + this.props.movie.poster_path,\n      content: \"\", //comment 내용\n    };\n  }\n //찜한 목록 추가\n handleMovieSave = async () => {\n  var temp = {\n    movie_id : this.state.id,\n    movie_original_title : this.props.movie.original_title,\n    poster_path : this.props.movie.poster_path,\n    user_id : window.sessionStorage.getItem(\"user\"),\n    user_email : JSON.parse(window.sessionStorage.getItem(\"user\")).userEmail,\n  };\n  console.log(temp);\n  //유저세션값이 있을때(로그인)만 저장가능\n  if(JSON.parse(window.sessionStorage.getItem(\"user\")).userEmail != null){\n    await FavoriteMovieApiService.addMovie(temp)\n      .then(res => {\n        console.log(res.data);\n        //해당 영화가 내가 찜한목록에 있는지 없는지 여부 판단.\n        if (res.data === 'success') {\n          console.info('save success', this.props.databaseid);\n          alert(\"I wished\");\n          this.setState({\n            modal: false,\n          })\n        } else {\n          alert(\"이미 찜목록에 있습니다.\");\n          this.setState({\n            modal: false,\n          })\n        }\n      })\n      .catch(err => {\n        console.error('ApiService.addMovies 에러', err);\n        alert('Wish list save error\\nPlease contact the administrator');\n      })\n      //로그인이 하지않으면 찜버튼눌렀을때 로그인화면으로 이동시킴\n  } else {\n    alert('It is available after login.');\n    window.location.href=\"http://localhost:3000/login\";\n  }\n}\n\n  //찜한 목록 삭제\n  handleMovieDelete = async () => {\n    \n    await FavoriteMovieApiService.removeMovie2(this.state.id)\n    .then(res => {\n      console.info('삭제성공', res.state);\n      console.log(res.data);\n      if(res.data === 'success') {\n        alert(\"삭제했습니다.\");\n        // 내가찜한컨텐츠 페이지에서 삭제할 때\n        if(document.location.href === \"http://localhost:3000/myContent\") {\n          this.props.loadFavoriteMovie();\n          this.setState({\n            modal: false,\n          });\n        }\n        else {  //다른 화면에서 삭제할 때\n          this.setState({\n            modal: false,\n          });\n        }\n      }\n      else {  // 찜하지 않은 목록에서 삭제버튼을 누를때\n        alert('찜 목록에 없습니다.');\n        return;\n      }\n    })\n    .catch(err => {\n      console.error('ApiService.removeMovie 에러', err);\n      alert('찜 목록 삭제 오류\\n관리자 문의 바람');\n    })\n}\n\n  //이미지 클릭시 필요한 데이터를 모두 호출 하는메서드\n  getAllInfo = () => {\n    this.getMovieDetails();\n    this.getMoviesYoutubeKey();\n    this.getMovieCredits();\n    this.getCommentList();\n  };\n\n  //영화 디테일을 들고오는 메서드\n  getMovieDetails = async () => {\n    let res = await TMDBMovieApiService.getMovieDetails(this.state.id);\n    let genres = res.data.genres.map((item) => {\n      return item.name;\n    });\n    this.setState(\n      {\n        details: res.data,\n        genres: genres,\n      },\n      () => {\n        console.log(\"눌렀을때 디테일값!\", this.state.details);\n        console.log(\"this.state.poster_image : \", this.state.poster_image);\n        // console.log('눌렀을때 장르값!', this.state.genres);\n      }\n    );\n  };\n  //유튜브 키값을 들고오는 메서드\n  getMoviesYoutubeKey = async () => {\n    let res = await TMDBMovieApiService.getYoutubeKey(this.state.id);\n    //유튜브 영상이 있는경우 키값을 저장\n    if (res.data.results[0] !== undefined) {\n      console.log(\"youtubeKey데이터:\", res.data.results[0].key);\n      //대표 유튜브영상 1개만 들고와서 저장함\n      this.setState(\n        {\n          key:\n            \"https://youtube.com/embed/\" +\n            res.data.results[0].key +\n            \"?autoplay=1&controls=0&rel=0&loop=1\",\n        },\n        () => {\n          // console.log('눌렀을때 youtubeKey값!', this.state.key);\n        }\n      );\n      //없는경우 key를 false로 저장함\n    } else {\n      this.setState({ key: false });\n    }\n  };\n  //참여 배우명단을 불러오는 메서드\n  getMovieCredits = async () => {\n    let res = await TMDBMovieApiService.getCredits(this.state.id);\n    let cast = res.data.cast.slice(0, 6).map((item) => {\n      return item.name;\n    });\n    // console.log('참여 스테프정보:', res.data);\n    // console.log('참여 배우:', res.data.cast);\n    this.setState(\n      {\n        cast: cast,\n      },\n      () => {\n        // console.log('눌렀을때 cast값!', this.state.cast);\n      }\n    );\n  };\n\n  //댓글 리스트를 불러오는 메서드\n  getCommentList = async () => {\n    let res = await CommentApiService.getCommentList(this.state.id);\n    let commentList = res.data;\n    this.setState({ comments: commentList }, () => {\n      console.log(\"댓글정보!!!!\");\n      console.log(this.state.comments);\n    });\n  };\n  //전달받은 배열을 콤마로 구분한 String으로 만들어주는 메서드\n  seperactor = (Array) => {\n    var seperactor = \",\";\n    var tempString = \"\";\n    for (var i = 0; i < Array.length; i++) {\n      if (i < Array.length - 1) {\n        tempString += Array[i] + seperactor;\n      } else if (i === Array.length - 1) {\n        tempString += Array[i];\n      }\n    }\n    return tempString;\n  };\n\n  //true,false 값을 반대로 전환시키는 메서드\n  toggle = () => {\n    this.setState({ modal: !this.state.modal });\n  };\n  //comment달때 내용변화에 따른 state handler\n  handleText = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n  //댓글 작성\n  writeMovieComment = () => {\n    let user_id = sessionStorage.getItem(\"user\");\n    //로그인되어있는지 session값 체크\n    if (user_id == null) {\n      alert(\"로그인이 필요합니다\");\n      //로그인 페이지로 보냄\n      window.location.href = \"http://localhost:3000/login\";\n    }\n    let content = this.state.content;\n    //객체생성\n    let comment = {\n      movie_id: this.state.id,\n      user_id: user_id,\n      content: content,\n    };\n    //api호출\n    CommentApiService.writeMovieComment(comment)\n      .then((res) => {\n        console.log(res.data);\n        let result = res.data;\n        if (result === 1) {\n          alert(\"댓글작성완료\");\n          this.getCommentList();\n          //작성한 댓글 초기화\n          this.setState({ content: \"\" });\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n  //댓글삭제\n  deleteComment = (id, user_id) => {\n    // console.log(typeof this.props.user_id); //넘버\n    // console.log(typeof sessionStorage.getItem(\"user\")); //스트링\n    console.log(id); //해당 comment의 아이디값!\n    console.log(user_id);\n    //로그인 유저와 댓글 작성자가 동일인의 경우 삭제가능\n    if (sessionStorage.getItem(\"user\") === user_id.toString()) {\n      CommentApiService.deleteComment(id)\n        .then((res) => {\n          console.log(res.data); //삭제성공\n          if (res.status === 200) {\n            alert(\"댓글이 삭제되었습니다\");\n            //삭제 후 댓글리스트 다시 불러오기\n            this.getCommentList();\n          }\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n  render() {\n    return (\n      <div>\n        <div className=\"btn bg-transparent\" onClick={this.toggle}>\n          {/* {images} */}\n          {this.state.poster_image === \"http://image.tmdb.org/t/p/w500null\" ? (\n            <img\n              alt=\"\"\n              src={\"https://i.ytimg.com/vi/GV3HUDMQ-F8/maxresdefault.jpg\"}\n              height=\"270\"\n              width=\"180\"\n              style={{ margin: \"5px\" }}\n            />\n          ) : (\n            <img\n              src={this.state.poster_image}\n              width=\"180px\"\n              alt=\"new\"\n              style={{ borderRadius: 5 }}\n              onClick={this.getAllInfo}\n            />\n          )}\n        </div>\n        <Modal\n          isOpen={this.state.modal}\n          toggle={this.toggle}\n          size=\"lg\"\n          className=\"my-modal\"\n          style={{ maxWidth: \"900px\", width: \"80%\" }}\n        >\n          <div className=\"container\">\n            <div className=\"row\">\n              <div\n                onClick={this.toggle}\n                style={{\n                  paddingRight: \"10px\",\n                  margin: \"5px\",\n                  textDecoration: \"none\",\n                  color: \"#777777\",\n                  fontWeight: \"bold\",\n                  fontSize: \"x-large\",\n                  flex: \"1\",\n                  textAlign: \"right\",\n                }}\n              >\n                <Icon.XCircleFill />\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                <div className=\"vedio\">\n                  {this.state.key ? (\n                    <iframe\n                      title=\"Youtube Video Player\"\n                      className=\"video\"\n                      allowFullScreen\n                      frameBorder=\"0\"\n                      style={{\n                        width: \"100%\",\n                        height: \"50vh\",\n                        margin: 0,\n                        padding: 0,\n                      }}\n                      allow=\"autoplay\"\n                      src={this.state.key}\n                    ></iframe>\n                  ) : (\n                    \"Youtube영상이 없습니다\"\n                  )}\n\n                  <div>\n                    <h1 style={{ color: \"white\" }}>\n                      {this.state.details && this.state.details.title}\n                    </h1>\n                    <div style={{ flexDirection: \"row\" }}>\n                      <input\n                        className=\"btn btn-light btn-lg\"\n                        type=\"button\"\n                        value=\"▶ 재생\"\n                        style={{ margin: 5 }}\n                        onClick={() =>\n                          window.open(`${this.state.key}`, \"_blank\")\n                        }\n                      />\n                      <input\n                          className=\"btn btn-light btn-lg\"\n                          type=\"button\"\n                          value=\"❤\"\n                          style={{ margin: 5, borderRadius: 20 }}\n                          onClick={() => this.handleMovieSave()}\n                        />\n                      {sessionStorage.getItem(\"user\") != null ?\n                        <input\n                          className=\"btn btn-light btn-lg\"\n                          type=\"button\"\n                          value=\"❌ \"\n                          style={{ margin: 5, borderRadius: 20 }}\n                          onClick={() => this.handleMovieDelete(this.state.id)}\n                        />\n                        :''}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"row\" style={{ paddingLeft: \"24px\", marginTop: 15 }}>\n              <div className=\"col-8\">\n                <div className=\"content1\">\n                  <p className=\"contentFont\">\n                    {this.state.details.release_date &&\n                      this.state.details.release_date}{\" \"}\n                    {this.state.details.runtime && this.state.details.runtime}분\n                  </p>\n                  <p className=\"contentFont\" style={{ marginTop: 15 }}>\n                    {this.state.details.overview\n                      ? this.state.details.overview\n                      : \"줄거리 요약이 없습니다\"}\n                  </p>\n                </div>\n              </div>\n              <div className=\"col-4\">\n                <div className=\"content2\">\n                  <div style={{ flexDirection: \"row\", marginBottom: 10 }}>\n                    <div style={{ textDecoration: \"none\", color: \"#777777\" }}>\n                      출연\n                    </div>\n                    <div className=\"detailFont\">\n                      {this.state.cast && this.seperactor(this.state.cast)}\n                    </div>\n                  </div>\n                  <div style={{ flexDirection: \"row\", marginBottom: 10 }}>\n                    <div style={{ textDecoration: \"none\", color: \"#777777\" }}>\n                      장르\n                    </div>\n                    <div className=\"detailFont\">\n                      {this.state.genres && this.seperactor(this.state.genres)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"row\" style={{ paddingLeft: \"24px\", marginTop: 20 }}>\n              <div className=\"col\">\n                <form className=\"form-inline\" style={{ width: \"100%\" }}>\n                  <textarea\n                    placeholder=\"댓글을 입력해주세요\"\n                    className=\"form-control\"\n                    rows=\"2\"\n                    cols=\"100\"\n                    name=\"content\"\n                    value={this.state.content}\n                    onChange={(e) => this.handleText(e)}\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-danger btn-lg\"\n                    style={{ margin: 10 }}\n                    onClick={() => this.writeMovieComment()}\n                  >\n                    댓글\n                  </button>\n                </form>\n                <div className=\"comment\">\n                  {this.state.comments\n                    ? this.state.comments.map((item) => {\n                        return (\n                          <Comments\n                            key={item.id}\n                            id={item.id}\n                            movie_id={item.movie_id}\n                            user_id={item.user_id}\n                            content={item.content}\n                            deleteComment={this.deleteComment}\n                          />\n                        );\n                      })\n                    : \"\"}\n                </div>\n              </div>\n            </div>\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default DetailContentCompoent;\n"]},"metadata":{},"sourceType":"module"}